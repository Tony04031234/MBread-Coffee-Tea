"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},42802:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>h,serverHooks:()=>d,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>w});var a={};r.r(a),r.d(a,{POST:()=>l});var s=r(95419),i=r(69108),n=r(99678),u=r(78070),o=r(7529),p=r(9108);async function l(e){try{let{name:t,email:r,phone:a,password:s}=await e.json();if(!t||!r||!a||!s)return u.Z.json({message:"Vui l\xf2ng điền đầy đủ th\xf4ng tin"},{status:400});if(s.length<6)return u.Z.json({message:"Mật khẩu phải c\xf3 \xedt nhất 6 k\xfd tự"},{status:400});if(await p._.user.findUnique({where:{email:r}}))return u.Z.json({message:"Email n\xe0y đ\xe3 được sử dụng"},{status:400});let i=await o.ZP.hash(s,12),{password:n,...l}=await p._.user.create({data:{name:t,email:r,phone:a,password:i,role:"CUSTOMER",points:0}});return u.Z.json({message:"Đăng k\xfd th\xe0nh c\xf4ng!",user:l},{status:201})}catch(e){return console.error("Registration error:",e),u.Z.json({message:"Đ\xe3 xảy ra lỗi, vui l\xf2ng thử lại"},{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/tuannguyen/Applications/Mbread/app/api/auth/register/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:c,serverHooks:d,headerHooks:m,staticGenerationBailout:w}=h,f="/api/auth/register/route";function v(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:c})}},9108:(e,t,r)=>{r.d(t,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,118,70],()=>r(42802));module.exports=a})();