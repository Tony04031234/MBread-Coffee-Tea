(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{6665:function(e,t,s){Promise.resolve().then(s.bind(s,9603))},9603:function(e,t,s){"use strict";s.r(t);var a=s(7437),i=s(2265),r=s(6691),n=s.n(r),l=s(2167),c=s(5251),o=s(8980),d=s(3528),m=s(9901),h=s(6893);let p=e=>{let{cart:t,customerInfo:s,setCustomerInfo:i,orderSummary:r,formatPrice:l,updateQuantity:c,removeFromCart:d,clearCart:m,handleSubmitOrder:h,isSubmitting:p,currentStep:u,nextStep:x,prevStep:g,isMobile:y=!1,handleDetectLocation:f,isDetectingLocation:b,handleAddressChange:j,showAddressSuggestions:v,setShowAddressSuggestions:w,addressSuggestions:N,selectAddress:C,isSearching:k}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg ".concat(y?"p-0":"p-6"," ").concat(y?"":"sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto"),children:[!y&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Qyq,{className:"text-primary-600 text-xl"}),(0,a.jsxs)("h2",{className:"text-2xl font-serif font-bold text-primary-800",children:["Giỏ h\xe0ng (",t.length,")"]})]}),t.length>0&&(0,a.jsx)("button",{onClick:m,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"X\xf3a tất cả"})]}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.Qyq,{className:"text-gray-400 text-4xl mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Giỏ h\xe0ng trống"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Th\xeam m\xf3n ăn để bắt đầu đặt h\xe0ng"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-3 overflow-y-auto pr-2",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:(0,a.jsx)(n(),{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-primary-800 truncate",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:l(e.price)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>c(e.id,e.quantity-1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 transition-colors duration-200",children:(0,a.jsx)(o.ego,{size:14})}),(0,a.jsx)("span",{className:"w-8 text-center font-medium",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>c(e.id,e.quantity+1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 transition-colors duration-200",children:(0,a.jsx)(o.OvN,{size:14})})]}),(0,a.jsx)("button",{onClick:()=>d(e.id),className:"text-red-500 hover:text-red-700 transition-colors duration-200 p-1",children:(0,a.jsx)(o.Ybf,{size:16})})]},e.id))}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Tạm t\xednh:"}),(0,a.jsx)("span",{children:l(r.subtotal)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Thuế VAT (10%):"}),(0,a.jsx)("span",{children:l(r.tax)})]}),r.deliveryFee>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Ph\xed giao h\xe0ng:"}),(0,a.jsx)("span",{children:l(r.deliveryFee)})]}),r.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,a.jsx)("span",{children:"Giảm gi\xe1 (5%):"}),(0,a.jsxs)("span",{children:["-",l(r.discount)]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[(0,a.jsx)("span",{children:"Tổng cộng:"}),(0,a.jsx)("span",{className:"text-primary-600",children:l(r.total)})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(e<=u?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:e}),e<3&&(0,a.jsx)("div",{className:"md:w-24 sm:w-8 w-2 h-0.5 mx-2 ".concat(e<u?"bg-primary-600":"bg-gray-200")})]},e))}),1===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-serif font-semibold text-primary-800",children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.fzv,{className:"inline mr-2"}),"Họ v\xe0 t\xean *"]}),(0,a.jsx)("input",{type:"text",value:s.name,onChange:e=>i({...s,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nhập họ v\xe0 t\xean"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.tUt,{className:"inline mr-2"}),"Số điện thoại *"]}),(0,a.jsx)("input",{type:"tel",value:s.phone,onChange:e=>i({...s,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nhập số điện thoại"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:s.email,onChange:e=>i({...s,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nhập email (t\xf9y chọn)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.TCC,{className:"inline mr-2"}),"H\xecnh thức nhận h\xe0ng"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"pickup",checked:"pickup"===s.deliveryType,onChange:e=>i({...s,deliveryType:e.target.value}),className:"mr-2"}),(0,a.jsx)("span",{children:"Mang đi"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"delivery",checked:"delivery"===s.deliveryType,onChange:e=>i({...s,deliveryType:e.target.value}),className:"mr-2"}),(0,a.jsxs)("span",{children:["Giao h\xe0ng (+",l(15e3),")"]})]})]})]}),"delivery"===s.deliveryType&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.i63,{className:"inline mr-2"}),"Địa chỉ giao h\xe0ng *"]}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("button",{type:"button",onClick:f,disabled:b,className:"flex items-center space-x-2 text-sm text-primary-600 hover:text-primary-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(o.t$,{size:16}),(0,a.jsx)("span",{children:b?"Đang lấy vị tr\xed...":"Tự động lấy vị tr\xed hiện tại"})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:s.address,onChange:e=>j(e.target.value),onFocus:()=>s.address.length>=3&&w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10",placeholder:"Nhập địa chỉ hoặc t\xean đường..."}),(0,a.jsx)(o.jRj,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]}),v&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:k?(0,a.jsx)("div",{className:"px-4 py-3 text-center text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"spinner w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Đang t\xecm kiếm..."})]})}):N.length>0?N.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>C(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 flex items-center space-x-2",children:[(0,a.jsx)(o.i63,{size:16,className:"text-gray-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.address})]},e.id)):(0,a.jsx)("div",{className:"px-4 py-3 text-center text-gray-500",children:(0,a.jsx)("span",{className:"text-sm",children:"Kh\xf4ng t\xecm thấy địa chỉ ph\xf9 hợp"})})}),s.address&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chi tiết địa chỉ (tầng, số nh\xe0, ghi ch\xfa...)"}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:2,placeholder:"V\xed dụ: Tầng 5, số nh\xe0 123, căn hộ A..."})]})]}),(0,a.jsxs)("button",{onClick:x,disabled:!s.name||!s.phone||"delivery"===s.deliveryType&&!s.address,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"Tiếp tục"}),(0,a.jsx)(o.Tfp,{})]})]}),2===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-serif font-semibold text-primary-800",children:"Phương thức thanh to\xe1n"}),(0,a.jsx)("div",{className:"space-y-3",children:[{id:"cash",label:"Tiền mặt",icon:"\uD83D\uDCB5"},{id:"card",label:"Thẻ t\xedn dụng/ghi nợ",icon:"\uD83D\uDCB3"},{id:"momo",label:"V\xed MoMo",icon:"\uD83D\uDCF1"},{id:"zalopay",label:"ZaloPay",icon:"\uD83D\uDCF1"}].map(e=>(0,a.jsxs)("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",value:e.id,checked:s.paymentMethod===e.id,onChange:e=>i({...s,paymentMethod:e.target.value}),className:"mr-3"}),(0,a.jsx)("span",{className:"mr-3",children:e.icon}),(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ghi ch\xfa đặc biệt"}),(0,a.jsx)("textarea",{value:s.notes,onChange:e=>i({...s,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,placeholder:"Ghi ch\xfa cho đơn h\xe0ng (t\xf9y chọn)"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:g,className:"flex-1 btn-outline py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.YFh,{}),(0,a.jsx)("span",{children:"Quay lại"})]}),(0,a.jsxs)("button",{onClick:x,className:"flex-1 btn-primary py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"Tiếp tục"}),(0,a.jsx)(o.Tfp,{})]})]})]}),3===u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-serif font-semibold text-primary-800",children:"X\xe1c nhận đơn h\xe0ng"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Kh\xe1ch h\xe0ng:"}),(0,a.jsx)("span",{children:s.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"SĐT:"}),(0,a.jsx)("span",{children:s.phone})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"H\xecnh thức:"}),(0,a.jsx)("span",{children:"pickup"===s.deliveryType?"Mang đi":"Giao h\xe0ng"})]}),"delivery"===s.deliveryType&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Địa chỉ:"}),(0,a.jsx)("span",{className:"text-right max-w-48 truncate",children:s.address})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Thanh to\xe1n:"}),(0,a.jsx)("span",{children:"cash"===s.paymentMethod?"Tiền mặt":"card"===s.paymentMethod?"Thẻ":"momo"===s.paymentMethod?"MoMo":"ZaloPay"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:g,className:"flex-1 btn-outline py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.YFh,{}),(0,a.jsx)("span",{children:"Quay lại"})]}),(0,a.jsx)("button",{onClick:h,disabled:p,className:"flex-1 btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"spinner w-5 h-5"}),(0,a.jsx)("span",{children:"Đang xử l\xfd..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.UgA,{}),(0,a.jsx)("span",{children:"Đặt m\xf3n"})]})})]})]})]})]})]})};t.default=()=>{let{state:e,dispatch:t}=(0,m.useCart)(),[s,r]=(0,i.useState)("all"),[u,x]=(0,i.useState)(!1),[g,y]=(0,i.useState)(1),[f,b]=(0,i.useState)(!1),[j,v]=(0,i.useState)(!1),[w,N]=(0,i.useState)({name:"",phone:"",email:"",address:"",deliveryType:"pickup",paymentMethod:"cash",notes:""}),{addressSuggestions:C,showAddressSuggestions:k,setShowAddressSuggestions:T,isDetectingLocation:S,isSearching:E,searchAddress:M,detectCurrentLocation:P,getPlaceDetails:A,clearSuggestions:D}=(0,h.S)(),I="all"===s?d.p:d.p.filter(e=>e.category===s),L=e=>{t({type:"ADD_ITEM",payload:{id:e.id,name:e.name,price:e.price,image:e.image}}),window.innerWidth<1024&&x(!0)},R=e=>{t({type:"REMOVE_ITEM",payload:e})},z=(e,s)=>{t({type:"UPDATE_QUANTITY",payload:{id:e,quantity:s}})},_=()=>{t({type:"CLEAR_CART"})},q=async()=>{try{let e=await P();e&&N({...w,address:e})}catch(e){alert("Kh\xf4ng thể lấy vị tr\xed hiện tại. Vui l\xf2ng nhập địa chỉ thủ c\xf4ng.")}},B=e=>{N({...w,address:e}),M(e)},G=async e=>{try{let t=await A(e.placeId),s=(null==t?void 0:t.fullAddress)||e.fullAddress;N({...w,address:s}),D()}catch(t){N({...w,address:e.fullAddress}),D()}},O=e=>e.toLocaleString("vi-VN")+"đ",F=()=>{g<3&&y(g+1)},H=()=>{g>1&&y(g-1)},U=async()=>{b(!0),await new Promise(e=>setTimeout(e,2e3)),b(!1),v(!0),setTimeout(()=>{_(),N({name:"",phone:"",email:"",address:"",deliveryType:"pickup",paymentMethod:"cash",notes:""}),y(1),v(!1),x(!1)},3e3)};(0,i.useEffect)(()=>{let e=()=>{window.innerWidth>=1024&&x(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let V=(()=>{let t=e.totalPrice,s=.1*t,a="delivery"===w.deliveryType?15e3:0,i=t>2e5?.05*t:0;return{subtotal:t,tax:s,deliveryFee:a,discount:i,total:t+s+a-i}})();return(0,a.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,a.jsx)(l.M,{children:j&&(0,a.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)(c.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-white rounded-xl p-8 max-w-md mx-4 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(o.UgA,{className:"text-green-600 text-2xl"})}),(0,a.jsx)("h3",{className:"text-2xl font-serif font-bold text-primary-800 mb-2",children:"Đặt m\xf3n th\xe0nh c\xf4ng!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Cảm ơn bạn đ\xe3 đặt h\xe0ng. Ch\xfang t\xf4i sẽ li\xean hệ với bạn trong v\xf2ng 15 ph\xfat."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Trang sẽ tự động chuyển về trang chủ..."})]})})}),(0,a.jsx)("section",{className:"bg-primary-800 text-white py-12 md:py-20",children:(0,a.jsx)("div",{className:"container-custom text-center",children:(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-serif font-bold mb-4 md:mb-6",children:"Đặt m\xf3n online"}),(0,a.jsx)("p",{className:"text-lg md:text-xl opacity-90 max-w-2xl mx-auto px-4",children:"Đặt m\xf3n dễ d\xe0ng v\xe0 nhận ưu đ\xe3i đặc biệt khi đặt online"})]})})}),(0,a.jsx)("div",{className:"container-custom py-4 md:py-8 px-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 md:p-6 mb-4 md:mb-8",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-serif font-bold text-primary-800 mb-4",children:"Chọn m\xf3n"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 md:gap-3",children:[(0,a.jsx)("button",{onClick:()=>r("all"),className:"px-3 md:px-4 py-2 rounded-full font-medium transition-colors duration-200 text-sm md:text-base ".concat("all"===s?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Tất cả"}),d.b.map(e=>(0,a.jsxs)("button",{onClick:()=>r(e.id),className:"px-3 md:px-4 py-2 rounded-full font-medium transition-colors duration-200 text-sm md:text-base ".concat(s===e.id?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e.icon," ",e.name]},e.id))]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:I.map((e,t)=>(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 flex flex-col",children:[(0,a.jsx)("div",{className:"relative h-40 md:h-48",children:(0,a.jsx)(n(),{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"p-4 md:p-6 flex flex-col flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg md:text-xl font-serif font-semibold text-primary-800 mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-sm md:text-base text-gray-600 mb-4 leading-relaxed flex-grow",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[(0,a.jsx)("span",{className:"text-lg md:text-2xl font-bold text-primary-600",children:O(e.price)}),(0,a.jsxs)("button",{onClick:()=>L(e),className:"btn-primary flex items-center space-x-2 text-sm md:text-base px-3 md:px-4 py-2 md:py-3",children:[(0,a.jsx)(o.OvN,{}),(0,a.jsx)("span",{children:"Th\xeam"})]})]})]})]},e.id))})]}),(0,a.jsx)("div",{className:"hidden lg:block lg:col-span-1",children:(0,a.jsx)(p,{cart:e.items,customerInfo:w,setCustomerInfo:N,orderSummary:V,formatPrice:O,updateQuantity:z,removeFromCart:R,clearCart:_,handleSubmitOrder:U,isSubmitting:f,currentStep:g,nextStep:F,prevStep:H,handleDetectLocation:q,isDetectingLocation:S,handleAddressChange:B,showAddressSuggestions:k,setShowAddressSuggestions:T,addressSuggestions:C,selectAddress:G,isSearching:E})})]})}),(0,a.jsx)(l.M,{children:u&&(0,a.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>x(!1),children:(0,a.jsx)(c.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-xl max-h-[85vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[(0,a.jsxs)("h2",{className:"text-xl font-serif font-bold text-primary-800",children:["Giỏ h\xe0ng (",e.totalItems,")"]}),(0,a.jsx)("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,a.jsx)(o.q5L,{size:20})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(p,{cart:e.items,customerInfo:w,setCustomerInfo:N,orderSummary:V,formatPrice:O,updateQuantity:z,removeFromCart:R,clearCart:_,handleSubmitOrder:U,isSubmitting:f,currentStep:g,nextStep:F,prevStep:H,isMobile:!0,handleDetectLocation:q,isDetectingLocation:S,handleAddressChange:B,showAddressSuggestions:k,setShowAddressSuggestions:T,addressSuggestions:C,selectAddress:G,isSearching:E})})})]})})})})]})}},9901:function(e,t,s){"use strict";s.r(t),s.d(t,{CartProvider:function(){return l},useCart:function(){return c}});var a=s(7437),i=s(2265);let r=(0,i.createContext)(null),n=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(e=>e.id===t.payload.id)){let s=e.items.map(e=>e.id===t.payload.id?{...e,quantity:e.quantity+1}:e);return{items:s,totalItems:s.reduce((e,t)=>e+t.quantity,0),totalPrice:s.reduce((e,t)=>e+t.price*t.quantity,0),showMobileCart:e.showMobileCart}}{let s={...t.payload,quantity:1},a=[...e.items,s];return{items:a,totalItems:a.reduce((e,t)=>e+t.quantity,0),totalPrice:a.reduce((e,t)=>e+t.price*t.quantity,0),showMobileCart:e.showMobileCart}}case"REMOVE_ITEM":{let s=e.items.filter(e=>e.id!==t.payload);return{items:s,totalItems:s.reduce((e,t)=>e+t.quantity,0),totalPrice:s.reduce((e,t)=>e+t.price*t.quantity,0),showMobileCart:e.showMobileCart}}case"UPDATE_QUANTITY":{let s=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.max(0,t.payload.quantity)}:e).filter(e=>e.quantity>0);return{items:s,totalItems:s.reduce((e,t)=>e+t.quantity,0),totalPrice:s.reduce((e,t)=>e+t.price*t.quantity,0),showMobileCart:e.showMobileCart}}case"CLEAR_CART":return{items:[],totalItems:0,totalPrice:0,showMobileCart:e.showMobileCart};case"SHOW_MOBILE_CART":return{...e,showMobileCart:!0};case"HIDE_MOBILE_CART":return{...e,showMobileCart:!1};default:return e}},l=e=>{let{children:t}=e,[s,l]=(0,i.useReducer)(n,{items:[],totalItems:0,totalPrice:0,showMobileCart:!1});return(0,a.jsx)(r.Provider,{value:{state:s,dispatch:l},children:t})},c=()=>{let e=(0,i.useContext)(r);if(!e)throw Error("useCart must be used within a CartProvider");return e}},3528:function(e,t,s){"use strict";s.d(t,{b:function(){return i},p:function(){return a}});let a=[{id:"1",name:"C\xe0 ph\xea đen truyền thống",description:"C\xe0 ph\xea đen nguy\xean chất, pha theo phương ph\xe1p truyền thống Việt Nam",price:25e3,image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400",category:"coffee",isPopular:!0},{id:"2",name:"C\xe0 ph\xea sữa đ\xe1",description:"C\xe0 ph\xea pha với sữa đặc, th\xeam đ\xe1 vi\xean m\xe1t lạnh",price:3e4,image:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400",category:"coffee",isPopular:!0},{id:"3",name:"Cappuccino",description:"C\xe0 ph\xea espresso với sữa tươi v\xe0 lớp foam mịn m\xe0ng",price:45e3,image:"https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=400",category:"coffee"},{id:"4",name:"Latte",description:"C\xe0 ph\xea espresso với nhiều sữa tươi v\xe0 lớp foam nghệ thuật",price:5e4,image:"https://images.unsplash.com/photo-1561047029-3000c68339ca?w=400",category:"coffee"},{id:"5",name:"Americano",description:"C\xe0 ph\xea espresso pha lo\xe3ng với nước n\xf3ng",price:4e4,image:"https://images.unsplash.com/photo-1510591509098-f4fdc6d0ff04?w=400",category:"coffee"},{id:"6",name:"Mocha",description:"C\xe0 ph\xea espresso với s\xf4 c\xf4 la v\xe0 sữa tươi",price:55e3,image:"https://images.unsplash.com/photo-1511920170033-f8396924c348?w=400",category:"coffee"},{id:"7",name:"Tr\xe0 đen Earl Grey",description:"Tr\xe0 đen hảo hạng với hương bergamot tinh tế",price:35e3,image:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400",category:"tea",isPopular:!0},{id:"8",name:"Tr\xe0 xanh Matcha",description:"Tr\xe0 xanh Nhật Bản nguy\xean chất, bột matcha cao cấp",price:4e4,image:"https://images.unsplash.com/photo-1515823064-d6e0c04616a7?w=400",category:"tea"},{id:"9",name:"Tr\xe0 hoa c\xfac",description:"Tr\xe0 hoa c\xfac thơm ngon, tốt cho sức khỏe",price:3e4,image:"https://images.unsplash.com/photo-1571934811356-5cc061b6821f?w=400",category:"tea"},{id:"10",name:"Tr\xe0 sữa tr\xe2n ch\xe2u",description:"Tr\xe0 sữa đậm đ\xe0 với tr\xe2n ch\xe2u dai gi\xf2n",price:45e3,image:"https://images.unsplash.com/photo-1525385133512-2f3bdd039054?w=400",category:"tea",isPopular:!0},{id:"11",name:"Tr\xe0 đ\xe0o cam sả",description:"Tr\xe0 đ\xe0o tươi m\xe1t với cam sả thơm lừng",price:4e4,image:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400",category:"tea"},{id:"12",name:"Tr\xe0 sữa matcha",description:"Tr\xe0 sữa matcha ngọt ng\xe0o với lớp kem mịn",price:5e4,image:"https://images.unsplash.com/photo-1515823064-d6e0c04616a7?w=400",category:"tea"},{id:"13",name:"B\xe1nh croissant",description:"B\xe1nh sừng b\xf2 Ph\xe1p gi\xf2n tan, thơm bơ",price:25e3,image:"https://images.unsplash.com/photo-1555507036-ab1f4038808a?w=400",category:"pastry",isPopular:!0},{id:"14",name:"B\xe1nh muffin chocolate",description:"B\xe1nh muffin chocolate đậm đ\xe0, mềm mịn",price:3e4,image:"https://images.unsplash.com/photo-1607958996333-41aef7caefaa?w=400",category:"pastry"},{id:"15",name:"B\xe1nh tiramisu",description:"B\xe1nh tiramisu \xdd truyền thống, ngọt ng\xe0o",price:45e3,image:"https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=400",category:"pastry"},{id:"16",name:"B\xe1nh cheesecake",description:"B\xe1nh cheesecake New York, kem ph\xf4 mai mịn m\xe0ng",price:5e4,image:"https://images.unsplash.com/photo-1533134242443-d4fd215305ad?w=400",category:"pastry"},{id:"17",name:"B\xe1nh donut",description:"B\xe1nh donut mềm mịn với nhiều vị kh\xe1c nhau",price:2e4,image:"https://images.unsplash.com/photo-1551024506-0bccd828d307?w=400",category:"pastry"},{id:"18",name:"B\xe1nh macaron",description:"B\xe1nh macaron Ph\xe1p nhiều m\xe0u sắc, ngọt ng\xe0o",price:35e3,image:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=400",category:"pastry"},{id:"19",name:"C\xe0 ph\xea kem trứng",description:"C\xe0 ph\xea đặc biệt với kem trứng mịn m\xe0ng",price:55e3,image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400",category:"special",isPopular:!0},{id:"20",name:"Tr\xe0 sữa kem cheese",description:"Tr\xe0 sữa với lớp kem cheese đậm đ\xe0",price:5e4,image:"https://images.unsplash.com/photo-1525385133512-2f3bdd039054?w=400",category:"special"},{id:"21",name:"Smoothie tr\xe1i c\xe2y",description:"Sinh tố tr\xe1i c\xe2y tươi m\xe1t, nhiều vitamin",price:45e3,image:"https://images.unsplash.com/photo-1553530666-ba11a7da3888?w=400",category:"special"},{id:"22",name:"Frapp\xe9 chocolate",description:"Đồ uống lạnh chocolate đậm đ\xe0",price:5e4,image:"https://images.unsplash.com/photo-1511920170033-f8396924c348?w=400",category:"special"}],i=[{id:"coffee",name:"C\xe0 ph\xea",icon:"☕"},{id:"tea",name:"Tr\xe0",icon:"\uD83C\uDF75"},{id:"pastry",name:"B\xe1nh ngọt",icon:"\uD83E\uDD50"},{id:"special",name:"Đặc biệt",icon:"⭐"}]},6893:function(e,t,s){"use strict";s.d(t,{S:function(){return n}});var a=s(2265);class i{loadGoogleMapsScript(){if(window.google&&window.google.maps){this.initializeServices();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){let e=setInterval(()=>{window.google&&window.google.maps&&(clearInterval(e),this.initializeServices())},100);return}let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyD13v0NRaGrheqHGCoTcHEpDe8a_5WB6CY","&libraries=places&callback=initGoogleMaps"),e.async=!0,e.defer=!0,window.initGoogleMaps=()=>{this.initializeServices()},document.head.appendChild(e)}initializeServices(){window.google&&window.google.maps&&(this.autocompleteService=new window.google.maps.places.AutocompleteService,this.placesService=new window.google.maps.places.PlacesService(document.createElement("div")),this.geocoder=new window.google.maps.Geocoder,this.isLoaded=!0)}async searchAddresses(e){return this.isLoaded&&this.autocompleteService&&!(e.length<3)?new Promise(t=>{this.autocompleteService.getPlacePredictions({input:e,componentRestrictions:{country:"vn"},types:["address"]},(e,s)=>{s===window.google.maps.places.PlacesServiceStatus.OK&&e?t(e.map((e,t)=>({id:"suggestion-".concat(t),address:e.description,fullAddress:e.description,placeId:e.place_id}))):t([])})}):[]}async getPlaceDetails(e){return this.isLoaded&&this.placesService?new Promise(t=>{this.placesService.getDetails({placeId:e,fields:["formatted_address","geometry","address_components"]},(s,a)=>{a===window.google.maps.places.PlacesServiceStatus.OK&&s?t({id:e,address:s.formatted_address,fullAddress:s.formatted_address,placeId:e,coordinates:{lat:s.geometry.location.lat(),lng:s.geometry.location.lng()}}):t(null)})}):null}async reverseGeocode(e,t){return this.isLoaded&&this.geocoder?new Promise(s=>{this.geocoder.geocode({location:{lat:e,lng:t}},(e,t)=>{t===window.google.maps.GeocoderStatus.OK&&e[0]?s(e[0].formatted_address):s(null)})}):null}async getCurrentLocationAddress(){if(!navigator.geolocation)throw Error("Geolocation is not supported by this browser");return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(async s=>{try{let{latitude:t,longitude:a}=s.coords,i=await this.reverseGeocode(t,a);e(i)}catch(e){t(e)}},e=>{t(e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}isGoogleMapsLoaded(){return this.isLoaded}constructor(){this.isLoaded=!1,this.autocompleteService=null,this.placesService=null,this.geocoder=null,this.loadGoogleMapsScript()}}let r=new i,n=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),[c,o]=(0,a.useState)(!1),d=(0,a.useCallback)(async e=>{if(e.length<3){t([]),i(!1);return}o(!0);try{let s=await r.searchAddresses(e);t(s),i(s.length>0)}catch(e){console.error("Error searching addresses:",e),t([]),i(!1)}finally{o(!1)}},[]),m=(0,a.useCallback)(async()=>{l(!0);try{let e=await r.getCurrentLocationAddress();return i(!1),e}catch(e){throw console.error("Error detecting location:",e),e}finally{l(!1)}},[]),h=(0,a.useCallback)(async e=>{try{return await r.getPlaceDetails(e)}catch(e){return console.error("Error getting place details:",e),null}},[]),p=(0,a.useCallback)(()=>{t([]),i(!1)},[]);return{addressSuggestions:e,showAddressSuggestions:s,setShowAddressSuggestions:i,isDetectingLocation:n,isSearching:c,searchAddress:d,detectCurrentLocation:m,getPlaceDetails:h,clearSuggestions:p}}},2167:function(e,t,s){"use strict";s.d(t,{M:function(){return g}});var a=s(2265),i=s(538);function r(){let e=(0,a.useRef)(!1);return(0,i.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var n=s(2363),l=s(8243),c=s(961);class o extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let s=(0,a.useId)(),i=(0,a.useRef)(null),r=(0,a.useRef)({width:0,height:0,top:0,left:0});return(0,a.useInsertionEffect)(()=>{let{width:e,height:a,top:n,left:l}=r.current;if(t||!i.current||!e||!a)return;i.current.dataset.motionPopId=s;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${n}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),a.createElement(o,{isPresent:t,childRef:i,sizeRef:r},a.cloneElement(e,{ref:i}))}let m=({children:e,initial:t,isPresent:s,onExitComplete:i,custom:r,presenceAffectsLayout:n,mode:o})=>{let m=(0,c.h)(h),p=(0,a.useId)(),u=(0,a.useMemo)(()=>({id:p,initial:t,isPresent:s,custom:r,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;i&&i()},register:e=>(m.set(e,!1),()=>m.delete(e))}),n?void 0:[s]);return(0,a.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[s]),a.useEffect(()=>{s||m.size||!i||i()},[s]),"popLayout"===o&&(e=a.createElement(d,{isPresent:s},e)),a.createElement(l.O.Provider,{value:u},e)};function h(){return new Map}var p=s(781),u=s(6567);let x=e=>e.key||"",g=({children:e,custom:t,initial:s=!0,onExitComplete:l,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:d="sync"})=>{var h;(0,u.k)(!c,"Replace exitBeforeEnter with mode='wait'");let g=(0,a.useContext)(p.p).forceRender||function(){let e=r(),[t,s]=(0,a.useState)(0),i=(0,a.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,a.useCallback)(()=>n.Wi.postRender(i),[i]),t]}()[0],y=r(),f=function(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}(e),b=f,j=(0,a.useRef)(new Map).current,v=(0,a.useRef)(b),w=(0,a.useRef)(new Map).current,N=(0,a.useRef)(!0);if((0,i.L)(()=>{N.current=!1,function(e,t){e.forEach(e=>{let s=x(e);t.set(s,e)})}(f,w),v.current=b}),h=()=>{N.current=!0,w.clear(),j.clear()},(0,a.useEffect)(()=>()=>h(),[]),N.current)return a.createElement(a.Fragment,null,b.map(e=>a.createElement(m,{key:x(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:o,mode:d},e)));b=[...b];let C=v.current.map(x),k=f.map(x),T=C.length;for(let e=0;e<T;e++){let t=C[e];-1!==k.indexOf(t)||j.has(t)||j.set(t,void 0)}return"wait"===d&&j.size&&(b=[]),j.forEach((e,s)=>{if(-1!==k.indexOf(s))return;let i=w.get(s);if(!i)return;let r=C.indexOf(s),n=e;n||(n=a.createElement(m,{key:x(i),isPresent:!1,onExitComplete:()=>{j.delete(s);let e=Array.from(w.keys()).filter(e=>!k.includes(e));if(e.forEach(e=>w.delete(e)),v.current=f.filter(t=>{let a=x(t);return a===s||e.includes(a)}),!j.size){if(!1===y.current)return;g(),l&&l()}},custom:t,presenceAffectsLayout:o,mode:d},i),j.set(s,n)),b.splice(r,0,n)}),b=b.map(e=>{let t=e.key;return j.has(t)?e:a.createElement(m,{key:x(e),isPresent:!0,presenceAffectsLayout:o,mode:d},e)}),a.createElement(a.Fragment,null,j.size?b:b.map(e=>(0,a.cloneElement)(e)))}}},function(e){e.O(0,[342,691,971,938,744],function(){return e(e.s=6665)}),_N_E=e.O()}]);