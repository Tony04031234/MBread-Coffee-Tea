(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{130:function(e,s,t){Promise.resolve().then(t.t.bind(t,2445,23)),Promise.resolve().then(t.bind(t,5078)),Promise.resolve().then(t.bind(t,9137)),Promise.resolve().then(t.bind(t,9901)),Promise.resolve().then(t.t.bind(t,1749,23)),Promise.resolve().then(t.t.bind(t,5250,23)),Promise.resolve().then(t.t.bind(t,5935,23)),Promise.resolve().then(t.t.bind(t,6087,23))},5078:function(e,s,t){"use strict";t.r(s);var a=t(7437),r=t(2265),i=t(1396),l=t.n(i),n=t(4033),c=t(2749),o=t(8980),d=t(6691),m=t.n(d),h=t(9901),x=t(2167),u=t(5251),p=t(6893);s.default=()=>{var e,s,t,i,d,y,g,f;let[j,b]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(1),[k,T]=(0,r.useState)({name:"",phone:"",email:"",address:"",deliveryType:"pickup",paymentMethod:"cash",notes:""}),{addressSuggestions:M,showAddressSuggestions:P,setShowAddressSuggestions:S,isDetectingLocation:_,isSearching:I,searchAddress:E,detectCurrentLocation:A,getPlaceDetails:q,clearSuggestions:D}=(0,p.S)(),L=(0,n.usePathname)(),{data:z,status:O}=(0,c.useSession)(),{state:G,dispatch:R}=(0,h.useCart)(),B=G.showMobileCart,H=[{href:"/",label:"Trang chủ"},{href:"/menu",label:"Thực đơn"},{href:"/about",label:"Về ch\xfang t\xf4i"},{href:"/gallery",label:"Thư viện ảnh"},{href:"/franchise",label:"Nhượng quyền"},{href:"/contact",label:"Li\xean hệ"}],Q=e=>L===e,V=(e,s)=>{R({type:"UPDATE_QUANTITY",payload:{id:e,quantity:s}})},F=e=>{R({type:"REMOVE_ITEM",payload:e})},K=()=>{R({type:"CLEAR_CART"})},U=()=>{w<3&&C(w+1)},Y=()=>{w>1&&C(w-1)},W=async()=>{try{let e=await A();e&&T({...k,address:e})}catch(e){alert("Kh\xf4ng thể lấy vị tr\xed hiện tại. Vui l\xf2ng nhập địa chỉ thủ c\xf4ng.")}},X=e=>{T({...k,address:e}),E(e)},Z=async e=>{try{let s=await q(e.placeId),t=(null==s?void 0:s.fullAddress)||e.fullAddress;T({...k,address:t}),D()}catch(s){T({...k,address:e.fullAddress}),D()}};return(0,r.useEffect)(()=>{let e=()=>{N(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,a.jsxs)("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:[(0,a.jsxs)("div",{className:"container-custom px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsxs)(l(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)(m(),{src:"/mbread-logo.png",alt:"MBread Coffee & Tea",width:100,height:100,className:"w-10 h-10 rounded-full"}),(0,a.jsx)("span",{className:"text-xl md:text-2xl font-serif font-bold text-primary-800",children:"MBread Coffee & Tea"})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-6",children:[H.map(e=>(0,a.jsx)(l(),{href:e.href,className:"text-sm font-medium transition-colors duration-200 whitespace-nowrap ".concat(Q(e.href)?"text-primary-600 border-b-2 border-primary-600":"text-gray-700 hover:text-primary-600"),children:e.label},e.href)),"loading"===O?(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}):z?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),N(!v)},className:"flex items-center space-x-2 text-gray-700 hover:text-primary-600 transition-colors duration-200",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.fzv,{className:"text-primary-600"})}),(0,a.jsx)("span",{className:"font-medium",children:null===(e=z.user)||void 0===e?void 0:e.name})]}),v&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===(s=z.user)||void 0===s?void 0:s.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null===(t=z.user)||void 0===t?void 0:t.email}),(null===(i=z.user)||void 0===i?void 0:i.points)&&(0,a.jsxs)("p",{className:"text-xs text-primary-600",children:["Điểm: ",z.user.points]})]}),(0,a.jsx)(l(),{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>N(!1),children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,a.jsx)(l(),{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>N(!1),children:"Đơn h\xe0ng của t\xf4i"}),(null===(d=z.user)||void 0===d?void 0:d.role)==="ADMIN"&&(0,a.jsx)(l(),{href:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>N(!1),children:"Quản trị"}),(0,a.jsxs)("button",{onClick:()=>{(0,c.signOut)(),N(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50",children:[(0,a.jsx)(o.xqh,{className:"inline mr-2"}),"Đăng xuất"]})]})]}):(0,a.jsx)(l(),{href:"/auth/signin",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors duration-200",children:(0,a.jsx)("span",{className:"text-sm",children:"Đăng nhập"})}),(0,a.jsxs)(l(),{href:"/ordering",className:"btn-primary flex items-center space-x-2 text-sm px-4 py-2 relative",children:[(0,a.jsx)(o.Qyq,{}),(0,a.jsx)("span",{className:"text-sm",children:"Đặt m\xf3n"}),G.totalItems>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:G.totalItems})]})]}),(0,a.jsx)("button",{onClick:()=>b(!j),className:"lg:hidden p-2 rounded-md text-gray-700 hover:text-primary-600 hover:bg-gray-100",children:j?(0,a.jsx)(o.q5L,{size:24}):(0,a.jsx)(o.cur,{size:24})})]}),j&&(0,a.jsx)("div",{className:"lg:hidden border-t border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[H.map(e=>(0,a.jsx)(l(),{href:e.href,onClick:()=>b(!1),className:"font-medium transition-colors duration-200 ".concat(Q(e.href)?"text-primary-600":"text-gray-700 hover:text-primary-600"),children:e.label},e.href)),(0,a.jsxs)(l(),{href:"/ordering",onClick:()=>b(!1),className:"btn-primary flex items-center justify-center space-x-2 mt-4 relative",children:[(0,a.jsx)(o.Qyq,{}),(0,a.jsx)("span",{className:"text-sm",children:"Đặt m\xf3n"}),G.totalItems>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:G.totalItems})]}),(0,a.jsx)("div",{className:"",children:"loading"===O?(0,a.jsx)("div",{className:"w-full h-10 bg-gray-200 rounded animate-pulse"}):z?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-700",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.fzv,{className:"text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:null===(y=z.user)||void 0===y?void 0:y.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null===(g=z.user)||void 0===g?void 0:g.email})]})]}),(0,a.jsx)(l(),{href:"/profile",onClick:()=>b(!1),className:"block text-sm text-gray-600 hover:text-primary-600",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,a.jsx)(l(),{href:"/orders",onClick:()=>b(!1),className:"block text-sm text-gray-600 hover:text-primary-600",children:"Đơn h\xe0ng của t\xf4i"}),(null===(f=z.user)||void 0===f?void 0:f.role)==="ADMIN"&&(0,a.jsx)(l(),{href:"/admin",onClick:()=>b(!1),className:"block text-sm text-gray-600 hover:text-primary-600",children:"Quản trị"}),(0,a.jsxs)("button",{onClick:()=>{(0,c.signOut)(),b(!1)},className:"w-full bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-700 font-medium py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2 mt-2",children:[(0,a.jsx)(o.xqh,{}),(0,a.jsx)("span",{className:"text-sm",children:"Đăng xuất"})]})]}):(0,a.jsxs)(l(),{href:"/auth/signin",onClick:()=>b(!1),className:"btn-secondary flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.fzv,{}),(0,a.jsx)("span",{className:"text-sm",children:"Đăng nhập"})]})})]})})]}),(0,a.jsx)("div",{className:"lg:hidden fixed bottom-4 right-4 z-40",children:(0,a.jsxs)("button",{onClick:()=>R({type:"SHOW_MOBILE_CART"}),className:"bg-primary-600 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-colors duration-200 relative",children:[(0,a.jsx)(o.Qyq,{size:24}),G.totalItems>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold",children:G.totalItems})]})}),(0,a.jsx)(x.M,{children:B&&(0,a.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>R({type:"HIDE_MOBILE_CART"}),children:(0,a.jsx)(u.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-xl max-h-[85vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[(0,a.jsxs)("h2",{className:"text-xl font-serif font-bold text-primary-800",children:["Giỏ h\xe0ng (",G.totalItems,")"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[G.totalItems>0&&(0,a.jsx)("button",{onClick:K,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"X\xf3a tất cả"}),(0,a.jsx)("button",{onClick:()=>R({type:"HIDE_MOBILE_CART"}),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,a.jsx)(o.q5L,{size:20})})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"p-4",children:0===G.items.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.Qyq,{className:"text-gray-400 text-4xl mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Giỏ h\xe0ng trống"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Th\xeam m\xf3n ăn để bắt đầu đặt h\xe0ng"}),(0,a.jsxs)(l(),{href:"/menu",className:"btn-primary w-full flex items-center justify-center space-x-2",onClick:()=>R({type:"HIDE_MOBILE_CART"}),children:[(0,a.jsx)(o.OvN,{}),(0,a.jsx)("span",{children:"Th\xeam m\xf3n"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-3 overflow-y-auto pr-2",children:G.items.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:(0,a.jsx)(m(),{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-primary-800 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.price.toLocaleString("vi-VN"),"đ"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>V(e.id,e.quantity-1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 transition-colors duration-200",children:(0,a.jsx)(o.ego,{size:14})}),(0,a.jsx)("span",{className:"w-8 text-center font-medium",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>V(e.id,e.quantity+1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 transition-colors duration-200",children:(0,a.jsx)(o.OvN,{size:14})})]}),(0,a.jsx)("button",{onClick:()=>F(e.id),className:"text-red-500 hover:text-red-700 transition-colors duration-200 p-1",children:(0,a.jsx)(o.Ybf,{size:16})})]},e.id))}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Tạm t\xednh:"}),(0,a.jsxs)("span",{children:[G.totalPrice.toLocaleString("vi-VN"),"đ"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Thuế (10%):"}),(0,a.jsxs)("span",{children:[(.1*G.totalPrice).toLocaleString("vi-VN"),"đ"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Ph\xed giao h\xe0ng:"}),(0,a.jsx)("span",{children:"15.000đ"})]}),G.totalPrice>2e5&&(0,a.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,a.jsx)("span",{children:"Giảm gi\xe1 (5%):"}),(0,a.jsxs)("span",{children:["-",(.05*G.totalPrice).toLocaleString("vi-VN"),"đ"]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[(0,a.jsx)("span",{children:"Tổng cộng:"}),(0,a.jsxs)("span",{className:"text-primary-600",children:[(G.totalPrice+.1*G.totalPrice+15e3-(G.totalPrice>2e5?.05*G.totalPrice:0)).toLocaleString("vi-VN"),"đ"]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(e<=w?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"),children:e}),e<3&&(0,a.jsx)("div",{className:"w-8 h-0.5 mx-2 ".concat(e<w?"bg-primary-600":"bg-gray-200")})]},e))}),1===w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-serif font-semibold text-primary-800",children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.fzv,{className:"inline mr-2"}),"Họ v\xe0 t\xean *"]}),(0,a.jsx)("input",{type:"text",value:k.name,onChange:e=>T({...k,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nhập họ v\xe0 t\xean"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.tUt,{className:"inline mr-2"}),"Số điện thoại *"]}),(0,a.jsx)("input",{type:"tel",value:k.phone,onChange:e=>T({...k,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nhập số điện thoại"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:k.email,onChange:e=>T({...k,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nhập email (t\xf9y chọn)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.TCC,{className:"inline mr-2"}),"H\xecnh thức nhận h\xe0ng"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"pickup",checked:"pickup"===k.deliveryType,onChange:e=>T({...k,deliveryType:e.target.value}),className:"mr-2"}),(0,a.jsx)("span",{children:"Mang đi"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"delivery",checked:"delivery"===k.deliveryType,onChange:e=>T({...k,deliveryType:e.target.value}),className:"mr-2"}),(0,a.jsx)("span",{children:"Giao h\xe0ng (+15.000đ)"})]})]})]}),"delivery"===k.deliveryType&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(o.i63,{className:"inline mr-2"}),"Địa chỉ giao h\xe0ng *"]}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("button",{type:"button",onClick:W,disabled:_,className:"flex items-center space-x-2 text-sm text-primary-600 hover:text-primary-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(o.t$,{size:16}),(0,a.jsx)("span",{children:_?"Đang lấy vị tr\xed...":"Tự động lấy vị tr\xed hiện tại"})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:k.address,onChange:e=>X(e.target.value),onFocus:()=>k.address.length>=3&&S(!0),onBlur:()=>setTimeout(()=>S(!1),200),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10",placeholder:"Nhập địa chỉ hoặc t\xean đường..."}),(0,a.jsx)(o.jRj,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]}),P&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:I?(0,a.jsx)("div",{className:"px-4 py-3 text-center text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"spinner w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Đang t\xecm kiếm..."})]})}):M.length>0?M.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>Z(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 flex items-center space-x-2",children:[(0,a.jsx)(o.i63,{size:16,className:"text-gray-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.address})]},e.id)):(0,a.jsx)("div",{className:"px-4 py-3 text-center text-gray-500",children:(0,a.jsx)("span",{className:"text-sm",children:"Kh\xf4ng t\xecm thấy địa chỉ ph\xf9 hợp"})})})]}),(0,a.jsxs)("button",{onClick:U,disabled:!k.name||!k.phone||"delivery"===k.deliveryType&&!k.address,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"Tiếp tục"}),(0,a.jsx)(o.Tfp,{})]})]}),2===w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-serif font-semibold text-primary-800",children:"Phương thức thanh to\xe1n"}),(0,a.jsx)("div",{className:"space-y-3",children:[{id:"cash",label:"Tiền mặt",icon:"\uD83D\uDCB5"},{id:"card",label:"Thẻ t\xedn dụng/ghi nợ",icon:"\uD83D\uDCB3"},{id:"momo",label:"V\xed MoMo",icon:"\uD83D\uDCF1"},{id:"zalopay",label:"ZaloPay",icon:"\uD83D\uDCF1"}].map(e=>(0,a.jsxs)("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",value:e.id,checked:k.paymentMethod===e.id,onChange:e=>T({...k,paymentMethod:e.target.value}),className:"mr-3"}),(0,a.jsx)("span",{className:"mr-3",children:e.icon}),(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ghi ch\xfa đặc biệt"}),(0,a.jsx)("textarea",{value:k.notes,onChange:e=>T({...k,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,placeholder:"Ghi ch\xfa cho đơn h\xe0ng (t\xf9y chọn)"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:Y,className:"flex-1 btn-outline py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.YFh,{}),(0,a.jsx)("span",{children:"Quay lại"})]}),(0,a.jsxs)("button",{onClick:U,className:"flex-1 btn-primary py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"Tiếp tục"}),(0,a.jsx)(o.Tfp,{})]})]})]}),3===w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-serif font-semibold text-primary-800",children:"X\xe1c nhận đơn h\xe0ng"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Kh\xe1ch h\xe0ng:"}),(0,a.jsx)("span",{children:k.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"SĐT:"}),(0,a.jsx)("span",{children:k.phone})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"H\xecnh thức:"}),(0,a.jsx)("span",{children:"pickup"===k.deliveryType?"Mang đi":"Giao h\xe0ng"})]}),"delivery"===k.deliveryType&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Địa chỉ:"}),(0,a.jsx)("span",{className:"text-right max-w-48 truncate",children:k.address})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Thanh to\xe1n:"}),(0,a.jsx)("span",{children:"cash"===k.paymentMethod?"Tiền mặt":"card"===k.paymentMethod?"Thẻ":"momo"===k.paymentMethod?"MoMo":"ZaloPay"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:Y,className:"flex-1 btn-outline py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.YFh,{}),(0,a.jsx)("span",{children:"Quay lại"})]}),(0,a.jsxs)("button",{onClick:()=>{alert("Đặt m\xf3n th\xe0nh c\xf4ng!"),R({type:"HIDE_MOBILE_CART"}),C(1),K()},className:"flex-1 btn-primary py-3 flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.UgA,{}),(0,a.jsx)("span",{children:"Đặt m\xf3n"})]})]})]})]})]})})})]})})})})]})}},9137:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var a=t(7437),r=t(2749);function i(e){let{children:s}=e;return(0,a.jsx)(r.SessionProvider,{children:s})}},9901:function(e,s,t){"use strict";t.r(s),t.d(s,{CartProvider:function(){return n},useCart:function(){return c}});var a=t(7437),r=t(2265);let i=(0,r.createContext)(null),l=(e,s)=>{switch(s.type){case"ADD_ITEM":if(e.items.find(e=>e.id===s.payload.id)){let t=e.items.map(e=>e.id===s.payload.id?{...e,quantity:e.quantity+1}:e);return{items:t,totalItems:t.reduce((e,s)=>e+s.quantity,0),totalPrice:t.reduce((e,s)=>e+s.price*s.quantity,0),showMobileCart:e.showMobileCart}}{let t={...s.payload,quantity:1},a=[...e.items,t];return{items:a,totalItems:a.reduce((e,s)=>e+s.quantity,0),totalPrice:a.reduce((e,s)=>e+s.price*s.quantity,0),showMobileCart:e.showMobileCart}}case"REMOVE_ITEM":{let t=e.items.filter(e=>e.id!==s.payload);return{items:t,totalItems:t.reduce((e,s)=>e+s.quantity,0),totalPrice:t.reduce((e,s)=>e+s.price*s.quantity,0),showMobileCart:e.showMobileCart}}case"UPDATE_QUANTITY":{let t=e.items.map(e=>e.id===s.payload.id?{...e,quantity:Math.max(0,s.payload.quantity)}:e).filter(e=>e.quantity>0);return{items:t,totalItems:t.reduce((e,s)=>e+s.quantity,0),totalPrice:t.reduce((e,s)=>e+s.price*s.quantity,0),showMobileCart:e.showMobileCart}}case"CLEAR_CART":return{items:[],totalItems:0,totalPrice:0,showMobileCart:e.showMobileCart};case"SHOW_MOBILE_CART":return{...e,showMobileCart:!0};case"HIDE_MOBILE_CART":return{...e,showMobileCart:!1};default:return e}},n=e=>{let{children:s}=e,[t,n]=(0,r.useReducer)(l,{items:[],totalItems:0,totalPrice:0,showMobileCart:!1});return(0,a.jsx)(i.Provider,{value:{state:t,dispatch:n},children:s})},c=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useCart must be used within a CartProvider");return e}},6893:function(e,s,t){"use strict";t.d(s,{S:function(){return l}});var a=t(2265);class r{loadGoogleMapsScript(){if(window.google&&window.google.maps){this.initializeServices();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){let e=setInterval(()=>{window.google&&window.google.maps&&(clearInterval(e),this.initializeServices())},100);return}let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyD13v0NRaGrheqHGCoTcHEpDe8a_5WB6CY","&libraries=places&callback=initGoogleMaps"),e.async=!0,e.defer=!0,window.initGoogleMaps=()=>{this.initializeServices()},document.head.appendChild(e)}initializeServices(){window.google&&window.google.maps&&(this.autocompleteService=new window.google.maps.places.AutocompleteService,this.placesService=new window.google.maps.places.PlacesService(document.createElement("div")),this.geocoder=new window.google.maps.Geocoder,this.isLoaded=!0)}async searchAddresses(e){return this.isLoaded&&this.autocompleteService&&!(e.length<3)?new Promise(s=>{this.autocompleteService.getPlacePredictions({input:e,componentRestrictions:{country:"vn"},types:["address"]},(e,t)=>{t===window.google.maps.places.PlacesServiceStatus.OK&&e?s(e.map((e,s)=>({id:"suggestion-".concat(s),address:e.description,fullAddress:e.description,placeId:e.place_id}))):s([])})}):[]}async getPlaceDetails(e){return this.isLoaded&&this.placesService?new Promise(s=>{this.placesService.getDetails({placeId:e,fields:["formatted_address","geometry","address_components"]},(t,a)=>{a===window.google.maps.places.PlacesServiceStatus.OK&&t?s({id:e,address:t.formatted_address,fullAddress:t.formatted_address,placeId:e,coordinates:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}}):s(null)})}):null}async reverseGeocode(e,s){return this.isLoaded&&this.geocoder?new Promise(t=>{this.geocoder.geocode({location:{lat:e,lng:s}},(e,s)=>{s===window.google.maps.GeocoderStatus.OK&&e[0]?t(e[0].formatted_address):t(null)})}):null}async getCurrentLocationAddress(){if(!navigator.geolocation)throw Error("Geolocation is not supported by this browser");return new Promise((e,s)=>{navigator.geolocation.getCurrentPosition(async t=>{try{let{latitude:s,longitude:a}=t.coords,r=await this.reverseGeocode(s,a);e(r)}catch(e){s(e)}},e=>{s(e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}isGoogleMapsLoaded(){return this.isLoaded}constructor(){this.isLoaded=!1,this.autocompleteService=null,this.placesService=null,this.geocoder=null,this.loadGoogleMapsScript()}}let i=new r,l=()=>{let[e,s]=(0,a.useState)([]),[t,r]=(0,a.useState)(!1),[l,n]=(0,a.useState)(!1),[c,o]=(0,a.useState)(!1),d=(0,a.useCallback)(async e=>{if(e.length<3){s([]),r(!1);return}o(!0);try{let t=await i.searchAddresses(e);s(t),r(t.length>0)}catch(e){console.error("Error searching addresses:",e),s([]),r(!1)}finally{o(!1)}},[]),m=(0,a.useCallback)(async()=>{n(!0);try{let e=await i.getCurrentLocationAddress();return r(!1),e}catch(e){throw console.error("Error detecting location:",e),e}finally{n(!1)}},[]),h=(0,a.useCallback)(async e=>{try{return await i.getPlaceDetails(e)}catch(e){return console.error("Error getting place details:",e),null}},[]),x=(0,a.useCallback)(()=>{s([]),r(!1)},[]);return{addressSuggestions:e,showAddressSuggestions:t,setShowAddressSuggestions:r,isDetectingLocation:l,isSearching:c,searchAddress:d,detectCurrentLocation:m,getPlaceDetails:h,clearSuggestions:x}}},2445:function(){},6087:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[342,691,396,232,761,971,938,744],function(){return e(e.s=130)}),_N_E=e.O()}]);